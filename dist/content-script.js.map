{"version":3,"sources":["utils/browser.js","content-script.js"],"names":["_browser","browser","chrome","e","window","_isChrome","$browser","isChromeBrowser","console","log","sendMessage","message","Promise","resolve","runtime","onMessage","handler","addListener","request","sender","sendResponse","result","then","scanViruses","url","location","origin","startsWith","r","contentScriptQuery","dontRun","host","document","createElement","body","insertAdjacentElement","$root","attachShadow","mode","updatePanel","code","contentHTML","innerHTML"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAMA,QAAQ,GAAG,MAAM;AACrB,MAAI;AACF,WAAOC,OAAO,IAAIC,MAAlB;AACD,GAFD,CAEE,OAAOC,CAAP,EAAW;AACX,WAAOC,MAAM,CAAC,SAAD,CAAN,IAAqBA,MAAM,CAAC,QAAD,CAAlC;AACD;AACF,CAND;;AAQA,MAAMC,SAAS,GAAG,MAAM;AACtB,SAAO,CAAC,CAACJ,OAAF,IAAa,CAAC,CAACC,MAAtB;AACD,CAFD;;AAIO,MAAMI,QAAQ,GAAGJ,MAAjB,EACP;;;AAGO,MAAMK,eAAe,GAAG,IAAxB;;AACPC,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBF,eAAxB;;AAEO,eAAeG,WAAf,CAA2BC,OAA3B,EAAoC;AACzC,MAAIJ,eAAJ,EAAsB;AACpB,WAAO,IAAIK,OAAJ,CAAYC,OAAO,IAAI;AAC5BP,MAAAA,QAAQ,CAACQ,OAAT,CAAiBJ,WAAjB,CAA6BC,OAA7B,EAAsCE,OAAtC;AACD,KAFM,CAAP;AAGD,GAJD,MAIO;AACL,WAAOP,QAAQ,CAACQ,OAAT,CAAiBJ,WAAjB,CAA6BC,OAA7B,CAAP;AACD;AACF;;AAEM,SAASI,SAAT,CAAmBC,OAAnB,EAA4B;AACjCV,EAAAA,QAAQ,CAACQ,OAAT,CAAiBC,SAAjB,CAA2BE,WAA3B,CAAuC,CAACC,OAAD,EAAUC,MAAV,EAAkBC,YAAlB,KAAmC;AACxE,UAAMC,MAAM,GAAGL,OAAO,CAACE,OAAD,EAAUC,MAAV,CAAtB;;AACA,QAAIE,MAAM,YAAYT,OAAtB,EAAgC;AAC9BS,MAAAA,MAAM,CAACC,IAAP,CAAYF,YAAZ;AACA,aAAO,IAAP,CAF8B,CAEhB;AACf;;AACDA,IAAAA,YAAY,CAACC,MAAD,CAAZ;AACD,GAPD;AAQD;;;;ACvCD;;AAEA;AAEAE,WAAW;;AAEX,eAAeA,WAAf,GAA6B;AAC3B,QAAMC,GAAG,GAAGpB,MAAM,CAACqB,QAAP,CAAgBC,MAA5B;AACAlB,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBe,GAApB;;AACA,MAAIA,GAAG,CAACG,UAAJ,CAAe,qBAAf,CAAJ,EAA4C;AAC1C,UAAMC,CAAC,GAAG,MAAM,0BAAY;AAC1BC,MAAAA,kBAAkB,EAAE,aADM;AAE1BL,MAAAA,GAAG,EAAEA;AAFqB,KAAZ,CAAhB;AAIAhB,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBmB,CAApB;AACD;AACF;;AAGD,SAASE,OAAT,GAAmB;AAEjB,QAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAb;AACAD,EAAAA,QAAQ,CAACE,IAAT,CAAcC,qBAAd,CAAoC,aAApC,EAAmDJ,IAAnD;AACA,QAAMK,KAAK,GAAGL,IAAI,CAACM,YAAL,CAAkB;AAACC,IAAAA,IAAI,EAAE;AAAP,GAAlB,CAAd;AAEAC,EAAAA,WAAW;;AAGX,WAASA,WAAT,CAAqBC,IAAI,GAAG,KAA5B,EAAmC;AACjC,UAAMC,WAAW,GAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+CD,IAAK;AACpD,KAZI;AAcAJ,IAAAA,KAAK,CAACM,SAAN,GAAkBD,WAAlB;AACD;AAEF","file":"content-script.js","sourceRoot":"..\\src","sourcesContent":["\nconst _browser = () => {\n  try {\n    return browser || chrome;\n  } catch( e ) {\n    return window['browser'] || window['chrome'];\n  }\n};\n\nconst _isChrome = () => {\n  return !!browser && !!chrome;\n};\n\nexport const $browser = chrome;\n// export const $browser = _browser();\n\n\nexport const isChromeBrowser = true;\nconsole.log('isChrome', isChromeBrowser);\n\nexport async function sendMessage(message) {\n  if( isChromeBrowser ) {\n    return new Promise(resolve => {\n      $browser.runtime.sendMessage(message, resolve);\n    });\n  } else {\n    return $browser.runtime.sendMessage(message);\n  }\n}\n\nexport function onMessage(handler) {\n  $browser.runtime.onMessage.addListener((request, sender, sendResponse) => {\n    const result = handler(request, sender);\n    if( result instanceof Promise ) {\n      result.then(sendResponse);\n      return true;  // Will respond asynchronously\n    }\n    sendResponse(result);\n  });\n}\n\n","import {sendMessage} from \"./utils/browser\";\n\n// dontRun();\n\nscanViruses();\n\nasync function scanViruses() {\n  const url = window.location.origin;\n  console.log('SCAN', url);\n  if( url.startsWith('https://httpbin.org') ) {\n    const r = await sendMessage({\n      contentScriptQuery: 'virusReport',\n      url: url\n    });\n    console.log('SCAN', r);\n  }\n}\n\n\nfunction dontRun() {\n\n  const host = document.createElement('div');\n  document.body.insertAdjacentElement('beforebegin', host);\n  const $root = host.attachShadow({mode: \"open\"});\n\n  updatePanel();\n\n\n  function updatePanel(code = '---') {\n    const contentHTML = `<style lang=\"scss\">\n      .title {\n        position: fixed;\n        background-color: #fff8;\n        padding: 1em;\n        color: green;\n        font-weight: 600;\n        z-index: 10000;\n      }\n    </style>\n    \n    <div class=\"title\">HELLO FROM EXTENSION: ${code}</div>\n    `;\n\n    $root.innerHTML = contentHTML;\n  }\n\n}\n\n"]}