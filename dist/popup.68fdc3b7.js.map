{"version":3,"sources":["utils/browser.js","utils/storage.js","popup/js/nav.js","popup/js/home.js","popup/js/settings.js","popup/js/feedback.js","popup/js/popup.js"],"names":["_browser","browser","chrome","e","window","_isChrome","$browser","isChromeBrowser","console","log","sendMessage","message","Promise","resolve","runtime","onMessage","handler","addListener","request","sender","sendResponse","result","then","set","key","value","storage","local","get","values","showSettings","document","getElementById","classList","add","hideSettings","remove","showFeedback","hideFeedback","setupHome","$home","querySelector","addEventListener","toggleOnOffState","body","isOn","getOnOff","updateOnOffState","setTimeout","setOnOff","toggle","setupSettings","$settings","$submarine","$selector","selectLevel","currentLevel","getLevel","updateLevel","level","target","className","startsWith","substr","setLevel","querySelectorAll","forEach","$","$level","rect","getBoundingClientRect","y","top","bottom","style","setupFeedback","$feedback","submitForm","once"],"mappings":"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","file":"popup.68fdc3b7.js","sourceRoot":"..\\src","sourcesContent":["\nconst _browser = () => {\n  try {\n    return browser || chrome;\n  } catch( e ) {\n    return window['browser'] || window['chrome'];\n  }\n};\n\nconst _isChrome = () => {\n  return !!browser && !!chrome;\n};\n\nexport const $browser = chrome;\n// export const $browser = _browser();\n\n\nexport const isChromeBrowser = true;\nconsole.log('isChrome', isChromeBrowser);\n\nexport async function sendMessage(message) {\n  if( isChromeBrowser ) {\n    return new Promise(resolve => {\n      $browser.runtime.sendMessage(message, resolve);\n    });\n  } else {\n    return $browser.runtime.sendMessage(message);\n  }\n}\n\nexport function onMessage(handler) {\n  $browser.runtime.onMessage.addListener((request, sender, sendResponse) => {\n    const result = handler(request, sender);\n    if( result instanceof Promise ) {\n      result.then(sendResponse);\n      return true;  // Will respond asynchronously\n    }\n    sendResponse(result);\n  });\n}\n\n","import {$browser} from \"./browser\";\n\nexport default {\n\n  set(key, value) {\n    $browser.storage.local.set({[key]: value});\n  },\n\n  async get(key) {\n/*\n    const values = await (chrome\n        ? new Promise(resolve => $browser.storage.local.get(key, resolve))\n        : await $browser.storage.local.get(key));\n*/\n    const values = await new Promise(resolve => $browser.storage.local.get(key, resolve));\n    return values[key];\n  }\n\n}\n","export function showSettings() {\n  document.getElementById('settings').classList.add('show');\n}\n\nexport function hideSettings() {\n  document.getElementById('settings').classList.remove('show');\n}\n\nexport function showFeedback() {\n  document.getElementById('feedback').classList.add('show');\n}\n\nexport function hideFeedback() {\n  document.getElementById('feedback').classList.remove('show');\n}\n","import storage from \"../../utils/storage\";\nimport {showSettings, showFeedback} from \"./nav\";\n\nexport async function setupHome() {\n  const $home = document.getElementById('home');\n\n  $home.querySelector('.on-off')\n      .addEventListener(\"click\", toggleOnOffState);\n\n  $home.querySelector('.settings')\n      .addEventListener(\"click\", showSettings);\n\n  $home.querySelector('.feedback')\n      .addEventListener(\"click\", showFeedback);\n\n  document.body.classList.add('init');\n  const isOn = await getOnOff();\n  await updateOnOffState(isOn);\n  setTimeout(() => {\n    document.body.classList.remove('init');\n  });\n\n\n  async function toggleOnOffState() {\n    const isOn = !await getOnOff();\n    setOnOff(isOn);\n    await updateOnOffState(isOn);\n  }\n\n  async function updateOnOffState(isOn) {\n    $home.classList.toggle('on', isOn);\n  }\n\n  function setOnOff(isOn) {\n    storage.set('isOn', isOn);\n  }\n\n  async function getOnOff() {\n    return await storage.get('isOn') ?? false;\n  }\n}\n","import storage from \"../../utils/storage\";\nimport {hideSettings} from \"./nav\";\n\nexport async function setupSettings() {\n  const $settings = document.getElementById('settings');\n\n  $settings.querySelector('.back')\n      .addEventListener('click', hideSettings);\n\n  const $submarine = $settings.querySelector('.submarine');\n  const $selector = $settings.querySelector('.selector');\n  $selector.addEventListener('click', selectLevel);\n\n  let currentLevel = await getLevel();\n  updateLevel(currentLevel);\n\n  function selectLevel(e) {\n    let level = e.target.className;\n    if( level.startsWith('level') ) {\n      level = level.substr(6);\n      if( level !== currentLevel ) {\n        setLevel(level);\n        updateLevel(level);\n      }\n    }\n  }\n\n  function updateLevel(level) {\n    $submarine.classList.remove(`level-${currentLevel}`);\n    $submarine.classList.add(`level-${level}`);\n    currentLevel = level;\n\n    $selector.querySelectorAll(`.active`).forEach($ => $.classList.remove('active'));\n    const $level = $selector.querySelector(`.level-${level}`);\n    $level.classList.add('active');\n    const rect = $level.getBoundingClientRect();\n    console.log($level, rect);\n    const y = (rect.top + rect.bottom) / 2;\n    $submarine.style.top = `${y}px`;\n  }\n\n  async function getLevel() {\n    return await storage.get('level') ?? '1';\n  }\n\n  async function setLevel(level) {\n    storage.set('level', level);\n  }\n}\n","import {hideFeedback} from \"./nav\";\n\nexport async function setupFeedback() {\n  const $feedback = document.getElementById('feedback');\n\n  $feedback.querySelector('.back')\n      .addEventListener('click', hideFeedback);\n\n  $feedback.querySelector('form').addEventListener('submit', submitForm);\n\n  function submitForm() {\n  }\n}\n","// import \"core-js/stable\";\r\n// import \"regenerator-runtime/runtime\";\r\nimport {setupHome} from \"./home\";\r\nimport {setupSettings} from \"./settings\";\r\nimport {setupFeedback} from \"./feedback\";\r\nimport \"../css/index.scss\";\r\n\r\nwindow.addEventListener('load', () => {\r\n// document.addEventListener('readystatechange', () => {\r\n//   if( document.readyState !== 'interactive' )\r\n//     return;\r\n\r\n  setupHome();\r\n  setupSettings();\r\n  setupFeedback();\r\n\r\n// });\r\n}, {once: true});\r\n\r\n\r\n\r\n"]}